<!-- TODO: Add trophy images to beers on 1, 2, 3 places! (gold, silver, bronze)-->
<!-- TODO: Add video to every beer (to be an optional field) -->
<!-- TODO: Tidy average rating to 0 decimal when number is a whole-->

<html>
<head>
    <link href="./bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body ng-app="beerList" ng-controller = "beerCtrl">
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-md-offset-1">
                <h1 class="text-center">BeerList</h1>
                <div class="page-header">
                </div>
            </div>
          </div>
                <!-- render beers here -->
                <div class = "row">
                  <div class ="col-md-12 beers">

                     <ul class = "beer-list">
                      <li ng-repeat = "beer in beers track by $index">
                        <button type="button" class="btn btn-danger remove-button" ng-click="removeBeer(beer._id)">Remove</button>
                        <p> Select rating: </p>
                         <!--<select class="form-control" ng-model = "beer_rating" ng-click = ".addRating(beer_rating, $index, beer._id)">
                           <option disabled selected hidden value = ""> Select </option>
                           <option value="1">1</option>
                           <option value="2">2</option>
                           <option value="3">3</option>
                           <option value="4">4</option>
                           <option value="5">5</option>
                         </select> -->
                         <select class="form-control" ng-model="beer_rating" ng-click = "addRating($index, beer_rating, beer._id)"
                         ng-options="ratings.indexOf(beer_rating) + 1 as beer_rating for beer_rating in ratings"></select>
                         <div class = "frame">
                           &nbsp;
                         </div>
                         <!-- <h3><input ng-model = "beer.name" class = "formBlur" ng-blur = "editBeerInfo(beer)"/></h3> -->
                         <p editable-text = "beer.name" onaftersave="editBeerInfo(beer)"> Name: {{ beer.name }} </p>
                         <p editable-text = "beer.style" onaftersave="editBeerInfo(beer)"> Style: {{ beer.style }} </p>
                         <p editable-text = "beer.abv" onaftersave="editBeerInfo(beer)"> ABV: {{ beer.abv }}  </p>
                         <p ng-hide = "beer.ratings.length == 0" > Average Rating: {{ avg(beer).toFixed(2) }} (by {{beer.ratings.length}} drinker(s))
                         <p ng-show = "beer.ratings.length == 0" > Average Rating: None yet! Be the first one to rate </p>
                         <!-- If the beer has no ratings, I want to init the avg to 0, so that the sort will work -->
                         <div ng-if = "beer.ratings.length == 0">
                           <div ng-init = "beer.avgRating = 0"></div>
                         </div>
                         <!-- ########### END OF *INIT* COMMENT  ############ -->
                         <a href="#" class="thumb"><img class = "beer-image" ng-src="{{beer.image_url}}"></a>

                     </li>
                    </ul>
                  </div>
                </div>

                <div class = "row">
                  <div> &nbsp; </div> <div> &nbsp; </div>
              <div class ="col-md-12 beers col-md-offset-1">
                <form>
                    <h3>Add a new beer</h3>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Beer Name" ng-model="name"></input>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Style" ng-model="style"></input>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="ABV" ng-model="abv"></input>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Image URL" ng-model="image"></input>
                    </div>
                    <button type="button" class="btn btn-primary" ng-click = "addBeer(name, style, abv, image)">Add</button>

                    <button type="button" class="btn btn-success" ng-show = "isSortAscending" ng-click = "sortAscending()">Sort(ascending)</button>
                    <button type="button" class="btn btn-success" ng-hide = "isSortAscending" ng-click = "sortDescending()">Sort(descending)</button>
                </form>
              </div>

        </div>
    </div>
    <script src="/angular/angular.js"></script>
    <script src="/angular-xeditable/dist/js/xeditable.js"> </script>
    <script src="/js/app.js"></script>
    <script src="/js/services/beerFactory.js"></script>
    <script src="/js/controllers/mainController.js"></script>
</body>

</html>
